(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(8094)}])},8094:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return X}});var r=n(4051),o=n.n(r),a=n(5893),c=n(6306),s=n(2959),u=n(1889),l=n(8504),f=n(6713),m=n(4842),d=n(882),p={basic:{simple:'print("hi")',expr2:'from lpython import i32\n\ndef main0():\n    x: i32\n    x = (2+3)*5\n    print(x)\n\nif __name__ == "__main__":\n    main0()\n',mandelbrot:'from lpython import i32, f64, TypeVar, Const\nfrom numpy import empty, int32\n\nh = TypeVar("h")\nw = TypeVar("w")\n\n@jscall\ndef show_img(w: i32, h: i32, A: i32[h, w]):\n    pass\n\n@jscall\ndef show_img_color(w: i32, h: i32, A: i32[h, w, 4]):\n    pass\n\ndef main0():\n    Nx: Const[i32] = 600; Ny: Const[i32] = 450; Nz: Const[i32] = 4; n_max: i32 = 255\n\n    xcenter: f64 = f64(-0.5); ycenter: f64 = f64(0.0)\n    width: f64 = f64(4); height: f64 = f64(3)\n    dx_di: f64 = width/f64(Nx); dy_dj: f64 = -height/f64(Ny)\n    x_offset: f64 = xcenter - f64(Nx+1)*dx_di/f64(2.0)\n    y_offset: f64 = ycenter - f64(Ny+1)*dy_dj/f64(2.0)\n\n    i: i32; j: i32; n: i32; idx: i32\n    x: f64; y: f64; x_0: f64; y_0: f64; x_sqr: f64; y_sqr: f64\n\n    image: i32[450, 600] = empty([Ny, Nx], dtype=int32)\n    image_color: i32[450, 600, 4] = empty([Ny, Nx, Nz], dtype=int32)\n    palette: i32[4, 3] = empty([4, 3], dtype=int32)\n\n    for j in range(Ny):\n        y_0 = y_offset + dy_dj * f64(j + 1)\n        for i in range(Nx):\n            x_0 = x_offset + dx_di * f64(i + 1)\n            x = 0.0; y = 0.0; n = 0\n            while(True):\n                x_sqr = x ** 2.0\n                y_sqr = y ** 2.0\n                if (x_sqr + y_sqr > f64(4) or n == n_max):\n                    image[j,i] = 255 - n\n                    break\n                y = y_0 + f64(2.0) * x * y\n                x = x_0 + x_sqr - y_sqr\n                n = n + 1\n\n    palette[0,0] =   0; palette[0,1] = 135; palette[0,2] =  68\n    palette[1,0] =   0; palette[1,1] =  87; palette[1,2] = 231\n    palette[2,0] = 214; palette[2,1] =  45; palette[2,2] =  32\n    palette[3,0] = 255; palette[3,1] = 167; palette[3,2] =   0\n\n    for j in range(Ny):\n        for i in range(Nx):\n            idx = image[j,i] - i32(image[j,i]/4)*4\n            image_color[j,i,0] = palette[idx,0] # Red\n            image_color[j,i,1] = palette[idx,1] # Green\n            image_color[j,i,2] = palette[idx,2] # Blue\n            image_color[j,i,3] = 255            # Alpha\n\n    print("The Mandelbrot image in color:")\n    show_img_color(Nx, Ny, image_color)\n    print("The Mandelbrot image in grayscale:")\n    show_img(Nx, Ny, image)\n    print("Done.")\n\nmain0()\n'},experimental:{}},_=n(5152),h=n.n(_),g=c.Z.TabPane,x=h()(Promise.all([n.e(281),n.e(668),n.e(286)]).then(n.bind(n,2286)),{loadableGenerated:{webpack:function(){return[2286]}},ssr:!1});var y=function(e){var t=function(e){var t=function(t){n.push({key:t,label:t,onClick:function(){o(p[e][t]),_(t)}})},n=[];for(var r in p[e])t(r);n.length>0&&v.push({key:e,label:e,children:n})},n=e.disabled,r=e.sourceCode,o=e.setSourceCode,i=e.exampleName,_=e.setExampleName,h=e.activeTab,y=e.handleUserTabChange,w=e.myHeight,v=[];for(var b in p)t(b);var j=(0,a.jsx)(s.Z,{items:v}),R={right:(0,a.jsxs)(u.Z,{disabled:n,onClick:function(){return y(h)},children:[" ",(0,a.jsx)(m.Z,{})," Run "]}),left:(0,a.jsx)(l.Z,{overlay:j,trigger:"hover",children:(0,a.jsx)("a",{onClick:function(e){return e.preventDefault()},children:(0,a.jsxs)(f.Z,{style:{marginRight:"10px"},children:["Examples ",(0,a.jsx)(d.Z,{})]})})})};return(0,a.jsx)("div",{className:"card-container",style:{height:"100%"},children:(0,a.jsx)(c.Z,{tabBarExtraContent:R,style:{height:"100%"},children:(0,a.jsx)(g,{tab:"".concat(i,".py"),style:{height:w},children:(0,a.jsx)(x,{sourceCode:r,setSourceCode:o})},"1")})})},w=n(7132),v=n(5439);var b,j=function(e){var t=e.activeTab,n=e.output,r=e.handleUserTabChange,o=e.myHeight,i=e.openNotification;return(0,a.jsxs)("div",{className:"card-container",children:[(0,a.jsx)(v.Z,{block:!0,style:{margin:"6px 0px 22px 0px"},options:["STDOUT","AST","ASR","WAT","CPP","PY"],value:t,onChange:function(e){return r(e)}}),(0,a.jsx)(u.Z,{onClick:function(){var e=(new DOMParser).parseFromString(n,"text/html");navigator.clipboard.writeText(e.documentElement.textContent),i("".concat(t," output copied"),"bottomRight")},style:{position:"absolute",right:"40px",top:"80px"},children:(0,a.jsx)(w.Z,{})}),(0,a.jsx)("pre",{style:{margin:"0px",height:o,overflow:"scroll",border:"1px solid black"},children:(0,a.jsx)("div",{id:"outputBox",style:{minHeight:"100%",fontSize:"0.9em",padding:"10px"},dangerouslySetInnerHTML:{__html:n}})})]})},R=n(4298),E=n.n(R),T=n(1163),N=n(7294);function S(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,o)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){S(i,r,o,a,c,"next",e)}function c(e){S(i,r,o,a,c,"throw",e)}a(void 0)}))}}function k(){return new Promise((function(e,t){Module.onRuntimeInitialized=function(){e({emit_ast_from_source:Module.cwrap("emit_ast_from_source","string",["string"]),emit_asr_from_source:Module.cwrap("emit_asr_from_source","string",["string"]),emit_wat_from_source:Module.cwrap("emit_wat_from_source","string",["string"]),emit_cpp_from_source:Module.cwrap("emit_cpp_from_source","string",["string"]),emit_py_from_source:Module.cwrap("emit_wat_from_source","string",["string"]),emit_wasm_from_source:Module.cwrap("emit_wasm_from_source","string",["string"])})}}))}function A(e,t,n){var r=function(){n(e.join("")),e.length=0};return{wasi_snapshot_preview1:{fd_write:function(t,n,r,o){var i=new DataView(b.buffer,n,2*Int32Array.BYTES_PER_ELEMENT),a=i.getInt32(0,!0),c=i.getInt32(4,!0),s=new TextDecoder("utf8").decode(new Uint8Array(b.buffer,a,c));return e.push(s),0},proc_exit:function(e){return t.val=e}},js:{cpu_time:function(e){return Date.now()/1e3},show_img:function(t,n,o){var i=new DataView(b.buffer,o,Int32Array.BYTES_PER_ELEMENT*n*t),a=document.createElement("CANVAS");a.width=t,a.height=n;for(var c=a.getContext("2d"),s=c.createImageData(t,n),u=0;u<s.data.length;u+=4)s.data[u+0]=i.getInt32(u,!0),s.data[u+1]=i.getInt32(u,!0),s.data[u+2]=i.getInt32(u,!0),s.data[u+3]=255;c.putImageData(s,0,0),e.push('<img alt="constructed image" src="'.concat(a.toDataURL("image/jpeg"),'" height="').concat(n,'" width="').concat(t,'" style="aspect-ratio: 1 / 1;"/>\n')),r()},show_img_color:function(t,n,o){var i=new DataView(b.buffer,o,4*Int32Array.BYTES_PER_ELEMENT*n*t),a=document.createElement("CANVAS");a.width=t,a.height=n;for(var c=a.getContext("2d"),s=c.createImageData(t,n),u=0;u<s.data.length;u++)s.data[u]=i.getInt32(4*u,!0);c.putImageData(s,0,0),e.push('<img alt="constructed image" src="'.concat(a.toDataURL("image/jpeg"),'" height="').concat(n,'" width="').concat(t,'" style="aspect-ratio: 1 / 1;"/>\n')),r()}}}}function P(e,t){return I.apply(this,arguments)}function I(){return I=C(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:r=e.sent,t.emit_ast_from_source=function(e){try{return r.emit_ast_from_source(e)}catch(t){return console.log(t),n(t+"\nERROR: AST could not be generated from the code"),0}},t.emit_asr_from_source=function(e){try{return r.emit_asr_from_source(e)}catch(t){return console.log(t),n(t+"\nERROR: ASR could not be generated from the code"),0}},t.emit_wat_from_source=function(e){try{return r.emit_wat_from_source(e)}catch(t){return console.log(t),n(t+"\nERROR: WAT could not be generated from the code"),0}},t.emit_cpp_from_source=function(e){try{return r.emit_cpp_from_source(e)}catch(t){return console.log(t),n(t+"\nERROR: CPP could not be generated from the code"),0}},t.emit_py_from_source=function(e){try{return r.emit_py_from_source(e)}catch(t){return console.log(t),n(t+"\nERROR: LLVM could not be generated from the code"),0}},t.compile_code=function(e){try{return r.emit_wasm_from_source(e)}catch(t){return console.log(t),n(t+"\nERROR: The code could not be compiled. Either there is a compile-time error or there is an issue at our end."),0}},t.execute_code=function(){var e=C(o().mark((function e(t,n){var r,i,a,c,s,u,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=A(i=[],r={val:1},n),u=function(){var e=s-c,t=sessionStorage.getItem("duration_compile");i.push("\nCompilation time: ".concat(t," ms")),i.push("\nExecution time: ".concat(e," ms")),n(i.join(""))},e.prev=5,e.next=8,WebAssembly.instantiate(t,a);case 8:l=e.sent,b=l.instance.exports.memory,c=performance.now(),l.instance.exports._start(),s=performance.now(),u(),e.next=24;break;case 16:if(e.prev=16,e.t0=e.catch(5),s=performance.now(),u(),0!=r.val){e.next=22;break}return e.abrupt("return");case 22:console.log(e.t0),n("\n".concat(e.t0,"\nERROR: The code could not be executed. Either there is a runtime error or there is an issue at our end."));case 24:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t,n){return e.apply(this,arguments)}}();case 10:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}var M=function(e){var t=e.moduleReady,n=e.setModuleReady,r=e.lfortran_funcs,i=e.openNotification,c=e.myPrint,s=(0,T.useRouter)().basePath;(0,N.useEffect)((function(){return window.Module={locateFile:function(e){return"".concat(s,"/").concat(e)}},function(){window.Module=null}}),[s]);var u=(0,N.useCallback)(C(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(r,c);case 2:n(!0),i("LPython Module Initialized!","bottomRight"),console.log("LPython Module Initialized!");case 5:case"end":return e.stop()}}),e)}))),[t]);return(0,a.jsx)("div",{children:(0,a.jsx)(E(),{src:"".concat(s,"/lpython.js"),onLoad:u})})};var D=n(6317),U=n(6226),Z=n(1382),O=n(9614),L=n(888),z=n(4431);function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,o)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){q(i,r,o,a,c,"next",e)}function c(e){q(i,r,o,a,c,"throw",e)}a(void 0)}))}}function H(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Y=new(n.n(z)()),W=(0,a.jsx)(L.Z,{style:{fontSize:24},spin:!0}),F=function(e,t){O.Z.info({message:e,placement:t})},G={emit_ast_from_source:null,emit_asr_from_source:null,emit_wat_from_source:null,emit_wasm_from_source:null,emit_cpp_from_source:null,emit_py_from_source:null,compile_code:null,execute_code:null};function X(){var e=(0,N.useState)(!1),t=e[0],n=e[1],r=(0,N.useState)(""),i=r[0],c=r[1],s=(0,N.useState)("main"),u=s[0],l=s[1],f=(0,N.useState)("STDOUT"),m=f[0],d=f[1],_=(0,N.useState)(""),h=_[0],g=_[1],x=(0,N.useState)(!1),w=x[0],v=x[1],b=function(){var e=(0,N.useState)(!1),t=e[0],n=e[1];return(0,N.useEffect)((function(){var e=function(){var e=window.innerWidth<768;n(e)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),t}()?"calc(50vh - 85px)":"calc(100vh - 170px)";function R(){return(R=B(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.location.search,"https://gist.githubusercontent.com/",(n=new URLSearchParams(t)).get("code")?(c(decodeURIComponent(n.get("code"))),v(!0)):n.get("gist")?(r="https://gist.githubusercontent.com/"+n.get("gist")+"/raw/",fetch(r,{cache:"no-store"}).then((function(e){return e.text()})).then((function(e){c(e),v(!0),F("Source Code loaded from gist.","bottomRight")})).catch((function(e){console.error("Error fetching data:",e),F("error fetching .","bottomRight")}))):(c(p.basic.mandelbrot),v(!0),n.size>0&&F("The URL contains an invalid parameter.","bottomRight"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return T.apply(this,arguments)}function T(){return(T=B(o().mark((function e(t){var n,r,a,c,s,u,l,f,m,p,_,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("STDOUT"!=t){e.next=23;break}if(""!==i.trim()){e.next=5;break}return g("No Source Code to compile"),d(t),e.abrupt("return");case 5:if(n=performance.now(),r=G.compile_code(i),a=performance.now(),c=a-n,sessionStorage.setItem("duration_compile",c),!r){e.next=21;break}if(s=H(r.split(",")),u=s[0],l=s.slice(1),"0"===u){e.next=16;break}g(Y.ansi_to_html(l)+"\nCompilation Time: ".concat(c," ms")),e.next=21;break;case 16:return f=[],e.next=19,G.execute_code(new Uint8Array(l),(function(e){return f.push(e)}));case 19:e.sent,g(f.join(""));case 21:e.next=24;break;case 23:"AST"==t?(m=G.emit_ast_from_source(i))&&g(Y.ansi_to_html(m)):"ASR"==t?(p=G.emit_asr_from_source(i))&&g(Y.ansi_to_html(p)):"WAT"==t?(_=G.emit_wat_from_source(i))&&g(Y.ansi_to_html(_)):"CPP"==t?(h=G.emit_cpp_from_source(i))&&g(Y.ansi_to_html(h)):"PY"==t?g("Support for PY is not yet enabled"):(console.log("Unknown key:",t),g("Unknown key: "+t));case 24:d(t);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,N.useEffect)((function(){!function(){R.apply(this,arguments)}()}),[]),(0,N.useEffect)((function(){t&&w&&E("STDOUT")}),[t,w]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M,{moduleReady:t,setModuleReady:n,lfortran_funcs:G,openNotification:F,myPrint:g}),(0,a.jsxs)(D.Z,{gutter:[16,16],children:[(0,a.jsx)(U.Z,{xs:{span:24},sm:{span:24},md:{span:12},children:(0,a.jsx)(y,{disabled:!t,sourceCode:i,setSourceCode:c,exampleName:u,setExampleName:l,activeTab:m,handleUserTabChange:E,myHeight:b})}),(0,a.jsx)(U.Z,{xs:{span:24},sm:{span:24},md:{span:12},children:t?(0,a.jsx)(j,{activeTab:m,output:h,handleUserTabChange:E,myHeight:b,openNotification:F}):(0,a.jsx)("div",{style:{height:b},children:(0,a.jsx)(Z.Z,{style:{position:"relative",top:"50%",left:"50%"},indicator:W})})})]})]})}}},function(e){e.O(0,[334,774,888,179],(function(){return t=5557,e(e.s=t);var t}));var t=e.O();_N_E=t}]);